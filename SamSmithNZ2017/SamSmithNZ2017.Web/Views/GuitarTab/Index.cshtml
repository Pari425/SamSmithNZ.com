@*@model SamSmithNZ2015.Models.GuitarTab.ArtistAlbumViewModel*@
@{
    ViewBag.Title = "Album List";
    Layout = "~/Views/Shared/_LayoutGuitarTab.cshtml";
    //bool isGuitarAdmin = User.Identity.IsAuthenticated && (User.IsInRole(SamSmithNZ2015.Models.AccountConstants.ACCOUNT_WebAdmin) == true);
}

<div>
    <table id="theTable">
        <tbody>
            @*@{
                string currentArtist = "";
            }
            @for (int i = 0; i < Model.Albums.Count; i++)
            {
                SamSmithNZ2015.Core.GuitarTab.Album item = Model.Albums[i];
                string postLinkText = "";
                if (item.AlbumYear > 0)
                {
                    postLinkText = " (" + item.AlbumYear.ToString() + ")";
                }
                <tr>
                    <td>
                        @if (currentArtist != item.ArtistNameTrimed)
                        {
                            <br />
                            <a name="@item.ArtistNameTrimed"></a><b>@item.ArtistName</b><br />
                        }
                        @Html.ActionLink(Model.CreateLinkText(item), "AlbumTabList", "GuitarTab", new { albumcode = @item.AlbumCode, isAdmin = isGuitarAdmin }, null)
                        @if (isGuitarAdmin == true)
                        {
                            <a href="@Url.Action("AddEditAlbum", "GuitarTab", new { albumcode = @item.AlbumCode })" style="text-decoration:none;">
                                <img src="@Url.Content("~/Content/images/guitartab/pencil.gif")" alt="" style="height: 12px; border-width: 0;" />
                            </a>
                        }
                        @if (i + 1 < Model.Albums.Count && Model.Albums[i + 1].AlbumName == item.AlbumName && Model.Albums[i + 1].IsBassTab == true)
                        {
                            i++;
                            item = Model.Albums[i];
                            @Html.ActionLink(Model.CreateLinkText(item), "AlbumTabList", "GuitarTab", new { albumcode = @item.AlbumCode, isAdmin = isGuitarAdmin }, null)
                            if (isGuitarAdmin == true)
                            {
                                <a href="@Url.Action("AddEditAlbum", "GuitarTab", new { albumcode = @item.AlbumCode })" style="text-decoration:none;">
                                    <img src="@Url.Content("~/Content/images/guitartab/pencil.gif")" alt="" style="height: 12px" />
                                </a>
                            }
                        }
                        @postLinkText
                    </td>
                </tr>
                        currentArtist = item.ArtistNameTrimed;
            }*@
        </tbody>
    </table>
</div>
