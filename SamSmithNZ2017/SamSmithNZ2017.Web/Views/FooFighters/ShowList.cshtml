@{
    Layout = "~/Views/Shared/_LayoutFooFighters.cshtml";
}

<div ng-controller="showListController">

    <img ng-hide="years" id="spinner1" src="~/Content/Images/spinner.gif" />
    <div ng-show="years">
        <div class="row">
            <div class="col-md-12 form-inline">
                <label for="cboYear">Select Year:</label>
                <select id="cboYear" name="cboYear" class="form-control" ng-model="selectedYear" ng-options="item.YearCode as item.YearText for item in years" ng-change="updateShows()" style="width: 350px;"></select>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <hr />
        </div>
    </div>

    <img ng-hide="averageSetlists" id="spinner1" src="~/Content/Images/spinner.gif" />
    <div ng-show="averageSetlists">
        <div class="row">
            <div class="col-md-12 form-inline">
                <span>This is the </span><select name="dboType" class="form-control" ng-model="setlistType" ng-change="updateSetlists()" style="width:153px;"><option value="0">average setlist</option><option value="1">total list of songs</option></select><span> for {{selectedYear}}. (Note that shows with more than </span>
                <select name="cboMinimumSongs" class="form-control" ng-options="item for item in minimumSongArray" ng-model="minimumSongCount" ng-change="updateSetlists()" style="width:64px;"></select>
                <span>songs were included@*An average of {{averageSetlists.length}} songs per show were played in {{selectedYear}}.*@)</span><br /><br />
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <span>{{averageSetlists.length}} songs displayed below</span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Order</th>
                        <th>Song</th>
                        <th>Times played in {{selectedYear}}</th>
                    </tr>
                    <tr ng-repeat="item in averageSetlists">
                        <td>{{item.AvgShowSongOrder | number:'0.0'}}</td>
                        <td><a href="/FooFighters/Song/GetSong?SongCode={{item.SongCode}}">{{item.SongName}}</a></td>
                        <td>{{item.SongCount}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <hr />
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <img ng-hide="shows" id="spinner1" src="~/Content/Images/spinner.gif" />
            <table class="table table-striped table-bordered" ng-show="shows">
                <tr>
                    <th>Show Date</th>
                    <th>Location</th>
                    <th>City</th>
                    <th>Song Count</th>
                </tr>
                <tr ng-repeat="item in shows">
                    <td><a href="/FooFighters/Show/GetShow?ShowCode={{item.ShowCode}}">{{item.ShowDate | date:'dd-MMM-yyyy'}}</a></td>
                    <td>{{item.ShowLocation}}</td>
                    <td>{{item.ShowCity}}</td>
                    <td>{{item.NumberOfSongsPlayed}}</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <hr />
        </div>
    </div>
</div>
