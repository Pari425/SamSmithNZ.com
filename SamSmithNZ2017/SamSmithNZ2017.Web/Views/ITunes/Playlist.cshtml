@{
    ViewBag.Title = "Playlist details";
    Layout = "~/Views/Shared/_LayoutITunes.cshtml";
}

@*<div ng-controller="indexController">
        <img ng-hide="albums" id="spinner1" src="~/Content/Images/spinner.gif" />
        <div ng-cloak>
            <table id="theTable">
                <tbody>
                    <tr ng-repeat="item in albums">
                        <td>
                            <br ng-if="item.IsLeadArtist == true" />
                            <span ng-if="item.IsLeadArtist == true" style="font-weight: bold;"><a name="{{item.ArtistNameTrimed}}"></a>{{item.ArtistName}}<br /></span>
                            <a ng-if="item.IsLeadArtist == false" href="~/GuitarTab/Album?AlbumCode={{item.AlbumCode}}">{{item.AlbumName}}</a>
                            @if (isGuitarTabAdmin == true)
                            {
                                <a ng-if="item.IsLeadArtist == false" href="~/GuitarTab/EditAlbum?AlbumCode={{item.AlbumCode}}">
                                    <img src="@Url.Content("~/Content/guitartab/pencil.gif")" alt="" style="height: 12px; border-width: 0;" />
                                </a>
                            }
                            <span ng-if="item.IsLeadArtist == false && item.BassAlbumCode > 0">&nbsp;&nbsp;</span>
                            <a ng-if="item.IsLeadArtist == false && item.BassAlbumCode > 0" href="~/GuitarTab/Album?AlbumCode={{item.BassAlbumCode}}">(Bass)</a>
                            <span ng-if="item.AlbumYear > 0 && item.IsBassTab==false"> ({{item.AlbumYear}})</span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>*@
<div ng-controller="playlistController">
    <table class="tableofcontents" padding="0" cellspacing="0">
        <tr>
            <td style="width: 100%;">
                <ul style="text-align: left; padding: 0px;">

                    <li class="tableofcontentsitem">
                        1. <a href="#TopArtists">Top Artists</a>
                    </li>
                    <li class="tableofcontentsitem">
                        2. <a href="#BiggestMovers">Biggest Movers</a>
                    </li>
                    <li class="tableofcontentsitem">
                        3. <a href="#Summary">Summary</a>
                    </li>
                </ul>
            </td>
        </tr>
    </table>

    <a name="TopArtists"></a>
    <h2 class="sectionTitle">Top Artists</h2>
    <table class="tableborders">
        <tr>
            <th class="headerborders">Artist</th>
            <th class="headerborders">Appearances This Month</th>
        </tr>
        <tr class="alternatingColors" ng-repeat="item in topArtists">
            <td class="cellborders">{{item.ArtistName}}</td>
            <td class="cellborders">{{item.ArtistCount}}</td>
        </tr>
        @*@foreach (SamSmithNZ2015.Core.iTunes.TopArtists item in Model.TopArtists)
            {
                <tr class="alternatingColors">
                    <td class="cellborders">@item.ArtistName</td>
                    <td class="cellborders">@item.ArtistCount</td>
                </tr>
            }*@
    </table>

    <a name="BiggestMovers"></a>
    <h2 class="sectionTitle">Biggest Movers</h2>
    <table class="tableborders">
        <tr>
            <th class="headerborders">Track</th>
            <th class="headerborders">Change This Month</th>
        </tr>
        <tr class="alternatingColors" ng-repeat="item in movements">
            <td class="cellborders">{{item.TrackName}}</td>
            <td class="cellborders">+{{item.ChangeThisMonth}}</td>
        </tr>
        @*@foreach (SamSmithNZ2015.Core.iTunes.Movement item in Model.Movement)
            {
                <tr class="alternatingColors">
                    <td class="cellborders">@item.TrackName</td>
                    <td class="cellborders">+@item.ChangeThisMonth</td>
                </tr>
            }*@
    </table>

    <a name="Summary"></a>
    <h2 class="sectionTitle">Summary</h2>
    <table class="tableborders">
        <tr>
            <th class="headerborders">Ranking</th>
            <th class="headerborders">Track Name</th>
            <th class="headerborders">Artist</th>
            <th class="headerborders">Album</th>
            <th class="headerborders">Play Count</th>
        </tr>
        <tr class="alternatingColors" ng-repeat="item in tracks">
            <td class="cellborders">
                {{item.Ranking}}
                <span ng-if="((item.Ranking - item.PreviousRanking) * -1) > 0">(+{{(item.Ranking - item.PreviousRanking) * -1}})</span>
                <span ng-if="((item.Ranking - item.PreviousRanking) * -1) < 0">({{(item.Ranking - item.PreviousRanking) * -1}})</span>
            </td>
            <td class="cellborders">{{item.TrackName}}</td>
            <td class="cellborders">{{item.ArtistName}}</td>
            <td class="cellborders">{{item.AlbumName}}</td>
            <td class="cellborders">
                {{item.PlayCount}}
                <span ng-if="(item.PlayCount - item.PreviousPlayCount) > 0">(+{{(item.PlayCount - item.PreviousPlayCount)}})</span>
                <span ng-if="(item.PlayCount - item.PreviousPlayCount) < 0">({{(item.PlayCount - item.PreviousPlayCount)}})</span>
            </td>
        </tr>
        @*@foreach (SamSmithNZ2015.Core.iTunes.Track item in Model.Tracks)
            {
                int rankingChange = (item.Ranking - item.PreviousRanking) * -1;
                String rankingChangeText = "";
                if (rankingChange > 0)
                {
                    rankingChangeText = "(+" + @rankingChange.ToString() + ")";
                }
                else if (rankingChange < 0)
                {
                    rankingChangeText = "(" + @rankingChange.ToString() + ")";
                }

                int playCountChange = (item.PlayCount - item.PreviousPlayCount);
                String playCountChangeText = "";
                if (playCountChange > 0)
                {
                    playCountChangeText = "(+" + @playCountChange.ToString() + ")";
                }
                else if (playCountChange < 0)
                {
                    playCountChangeText = "(" + @playCountChange.ToString() + ")";
                }
                <tr class="alternatingColors">
                    <td class="cellborders">@item.Ranking @rankingChangeText</td>
                    <td class="cellborders">@item.TrackName</td>
                    <td class="cellborders">@item.ArtistName</td>
                    <td class="cellborders">@item.AlbumName</td>
                    <td class="cellborders">@item.PlayCount @playCountChangeText</td>
                </tr>
            }*@
    </table>
</div>